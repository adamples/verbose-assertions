<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: ExampleTestCase
  
    &mdash; Documentation by YARD 0.7.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo; 
    
    
    <span class="title">ExampleTestCase</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ExampleTestCase
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Test/VerboseUnit/TestCase.html" title="Test::VerboseUnit::TestCase (class)">Test::VerboseUnit::TestCase</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Test/VerboseUnit/TestCase.html" title="Test::VerboseUnit::TestCase (class)">Test::VerboseUnit::TestCase</a></span></li>
          
            <li class="next">ExampleTestCase</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">example.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Basic problem with test/unit and test-unit frameworks for Ruby which this
code tries to address is that:
</p>
<pre class="code ruby"><code>
  <span class='id identifier rubyid_assert'>assert</span><span class='lparen'>(</span><span class='id identifier rubyid_checkSomething'>checkSomething</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='rparen'>)</span>
</code></pre>
<p>
results in most helpful message like this:
</p>
<pre class="code ruby"><code>
  &lt;false&gt; is not &lt;true&gt;
</code></pre>
<p>
Of course libraries enable us to pass additional message as last parameter
of assertion, but that&#8217;s not very convinient. In fact it&#8217;s not
convinient at all. And as we consider ourselves lazy (but in a good way!)
we just need to spent few hours to find a solution &#8212; code that will
generate more appropriate error messages.
</p>
<p>
In C we could do something like this:
</p>
<pre class="code ruby"><code>
  assert(a) ( (a) ? (1) : ( printf (&quot;%s:%d: %s(): assertion failed (%s).\n&quot;, \
    __FILE__, __LINE__, __FUNCTION__, #a), 0) )
</code></pre>
<p>
Preprocessor will replace #a with actual <b>code</b> that we passed to
macro, eg.
</p>
<pre class="code ruby"><code>
  <span class='id identifier rubyid_assert'>assert</span><span class='lparen'>(</span><span class='int'>2</span> <span class='op'>*</span> <span class='int'>2</span> <span class='op'>==</span> <span class='int'>5</span><span class='rparen'>)</span>
</code></pre>
<p>
Will produce output:
</p>
<pre class="code ruby"><code>
  file.c:44: function(): assertion failed(2 * 2 == 5).
</code></pre>
<p>
Now we know what is wrong at a glance. But we cannot simply apply this
approach to Ruby, unless we use some custom preprocessor &#8212; typical
ruby interpreter from typical ruby installation has no preprocessor.
</p>
<p>
On the other hand Ruby is interpreted language. Source files can be
accessed from code like any other files. Actually Ruby always passes IO
handler to actual file as global constant (<em>DATA</em>). So why not in
case of failed assertion just open file which called it and read params
list?
</p>
<p>
This simple idea does have some problems, but we will talk them later. For
now we will just define interface that we <b>want</b> to use. To find out
how it works proceed to Test::VerboseUnit::TestCase class documentation.
</p>
<p>
Code of following class should be familiar to everyone, who have ever had
any interaction with unit testing frameworks in Ruby. It inherits some base
class from framework, which usually provides assertion methods and some
magic/logic that runs tests.
</p>
<p>
Our work is to define test methods.
</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#test_1-instance_method" title="#test_1 (instance method)">- (Object) <strong>test_1</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Test method is identified by its name (beginning with &#8220;test&#8221;
string).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#test_2-instance_method" title="#test_2 (instance method)">- (Object) <strong>test_2</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This method in turn will do assertion with somewhat more complex
invocation.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#test_3-instance_method" title="#test_3 (instance method)">- (Object) <strong>test_3</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
In this example we use even more complex syntax, but it aims to show other
thing.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Test/VerboseUnit/TestCase.html" title="Test::VerboseUnit::TestCase (class)">Test::VerboseUnit::TestCase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Test/VerboseUnit/TestCase.html#run-class_method" title="Test::VerboseUnit::TestCase.run (method)">run</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Test/VerboseUnit/Assertions.html" title="Test::VerboseUnit::Assertions (module)">Test::VerboseUnit::Assertions</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Test/VerboseUnit/Assertions.html#assert_equal-instance_method" title="Test::VerboseUnit::Assertions#assert_equal (method)">#assert_equal</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="test_1-instance_method">
  
    - (<tt>Object</tt>) <strong>test_1</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Test method is identified by its name (beginning with &#8220;test&#8221;
string).
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'example.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_test_1'>test_1</span>
  <span class='comment'># Here we do some calulcations; usually we use some library that we want
</span>  <span class='comment'># to test
</span>  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='int'>1000000</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_b'>b</span> <span class='op'>+=</span> <span class='float'>0.000004</span>
  <span class='kw'>end</span>

  <span class='comment'># And here we test is result is correct. Two expressions are passed to
</span>  <span class='comment'># assertion method. If it fails (and it will), we expect error message in
</span>  <span class='comment'># following hair:
</span>  <span class='comment'>#
</span>  <span class='comment'>#   assert_equal failed in test_1!
</span>  <span class='comment'>#   2 * 2 != b
</span>  <span class='comment'>#     2 * 2 = 4
</span>  <span class='comment'>#     b = 3.9999...
</span>  <span class='comment'>#   backtrace follows...
</span>  <span class='id identifier rubyid_assert_equal'>assert_equal</span><span class='lparen'>(</span><span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_exp'>exp</span><span class='lparen'>(</span><span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="test_2-instance_method">
  
    - (<tt>Object</tt>) <strong>test_2</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This method in turn will do assertion with somewhat more complex invocation
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'example.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_test_2'>test_2</span>
  <span class='comment'># This assertion arguments contain many syntax structures that are hard
</span>  <span class='comment'># to parse without actual ruby parser, eg. strings and comments with brackets,
</span>  <span class='comment'># even whole loops, as they return value too.
</span>  <span class='id identifier rubyid_assert_equal'>assert_equal</span><span class='lparen'>(</span>

    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jakis\&quot;) tekst</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span>
        <span class='int'>10</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span>
      <span class='rparen'>)</span><span class='comma'>,</span>
    <span class='comment'># Some (comment &quot;string&quot;
</span>    <span class='int'>123</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="test_3-instance_method">
  
    - (<tt>Object</tt>) <strong>test_3</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
In this example we use even more complex syntax, but it aims to show other
thing. Statements below can be described in Ruby in more than one way. For
example strings can be denoted using apostrophes or quotation marks. If you
run this test, you will see, that syntax used in exception message differs
from original code (this can be considered as another limitation or a
feature of library).
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'example.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_test_3'>test_3</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span><span class='lparen'>(</span>
    <span class='qwords_beg'>%w[</span><span class='tstring_content'>warsaw</span><span class='words_sep'> </span><span class='tstring_content'>berlin</span><span class='words_sep'> </span><span class='tstring_content'>paris</span><span class='words_sep'> </span><span class='tstring_content'>budapest</span><span class='words_sep'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>i</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>warsaw</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>budapest</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
      <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Apr 23 11:34:57 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.5 (ruby-1.9.2).
</div>

  </body>
</html>